function WPATH(e){var t=e.lastIndexOf("/"),i=-1===t?"nl.fokkezb.infiniteScroll/"+e:e.substring(0,t)+"/nl.fokkezb.infiniteScroll/"+e.substring(t+1);return i}function Controller(){function e(){delete u.__parentSymbol,delete u.__itemTemplate,delete u.$model,n(u),s.isText.text=h.msgTap,s.isCenter.remove(s.isIndicator),l.addEventListener("scroll",r)}function t(e,t){if(s.isIndicator.hide(),s.isCenter.remove(s.isIndicator),0!==e&&!1!==e&&-1!==e&&1!==e&&!0!==e)throw Error("Pass a valid state");return v=e,a(t),s.isCenter.add(s.isText),s.isText.show(),setTimeout(function(){p=!1},25),!0}function i(){return p?!1:(p=!0,s.isCenter.remove(s.isText),s.isCenter.add(s.isIndicator),s.isIndicator.show(),s.trigger("end",{success:function(e){return t(d.SUCCESS,e)},error:function(e){return t(d.ERROR,e)},done:function(e){return t(d.DONE,e)}}),!0)}function r(e){var t;t=y&&e.contentOffset.y>y&&e.contentOffset.y+e.size.height>e.contentSize.height,y=e.contentOffset.y,t&&i()}function o(){t(d.DONE),l.removeEventListener("scroll",r)}function n(e){_.extend(h,e),a()}function a(e){s.isText.text=e?e:0===v||!1===v?h.msgError:-1===v?h.msgDone:h.msgTap}new(require("alloy/widget"))("nl.fokkezb.infiniteScroll"),this.__widgetId="nl.fokkezb.infiniteScroll",require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="widget";var l=arguments[0]?arguments[0].__parentSymbol:null;arguments[0]?arguments[0].$model:null,arguments[0]?arguments[0].__itemTemplate:null;var s=this,d={},c={};s.__views.is=Ti.UI.createView({top:"0dp",width:Ti.UI.FILL,height:Ti.UI.SIZE,id:"is"}),i?s.__views.is.addEventListener("click",i):c["$.__views.is!click!load"]=!0,s.__views.isCenter=Ti.UI.createView({height:"50dp",bottom:"0dp",id:"isCenter"}),s.__views.is.add(s.__views.isCenter),s.__views.isText=Ti.UI.createLabel({width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"#777",wordWrap:!1,font:{fontSize:"13dp"},id:"isText"}),s.__views.isCenter.add(s.__views.isText),s.__views.isIndicator=Ti.UI.createActivityIndicator({style:Ti.UI.iPhone.ActivityIndicatorStyle.DARK,id:"isIndicator"}),s.__views.isCenter.add(s.__views.isIndicator),l.footerView=s.__views.is,s.__views.widget&&s.addTopLevelView(s.__views.widget),d.destroy=function(){},_.extend(s,s.__views);var u=arguments[0]||{},h={msgTap:L("isTap","Tap to load more..."),msgDone:L("isDone","No more to load..."),msgError:L("isError","Tap to try again...")},p=!1,y=null,v=1;e(),d.SUCCESS=1,d.ERROR=0,d.DONE=-1,d.setOptions=n,d.load=i,d.state=t,d.dettach=o,c["$.__views.is!click!load"]&&s.__views.is.addEventListener("click",i),_.extend(s,d)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;