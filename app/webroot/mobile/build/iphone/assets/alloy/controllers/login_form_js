function Controller(){function e(){if(r.inputUsername.value&&r.inputPassword.value){r.activityIndicator.show(),r.buttonLogin.enabled=!1;var e=require("data");e.login(r.inputUsername.value,r.inputPassword.value,function(e){if(r.activityIndicator.hide(),r.buttonLogin.enabled=!0,"ok"===e.result){i();var t=Alloy.createController("indexhome").getView();t.open();var n=Alloy.Globals.loginwin;n.close(),Alloy.Globals.loginwin=null;var o=Alloy.Globals.navgroup;o.close(),o=null,Alloy.Globals.navgroup=null}else r.inputPassword.value="",alert(L("error","Error")+":\n"+e.msg)})}else Ti.UI.createAlertDialog({message:L("formMissingFields","Please complete all form fields"),ok:"OK",title:L("actionRequired","Action Required")}).show()}function t(){var e=Alloy.createController("register").getView();Alloy.Globals.navgroup.open(e)}function i(){Alloy.Collections.WorkersWidgets=Alloy.createCollection("workers_widgets"),Ti.API.info("Getting workers widgets");var e=[],t=Ti.Network.createHTTPClient({onerror:function(e){Ti.API.debug(e.error),alert("There was an error during the connection for workerswidgets")},timeout:1e3});t.open("POST",Alloy.Globals.BASEURL+"workers_widgets/mobileindex.json"),t.send({token:Ti.App.Properties.getString("token")}),t.onload=function(){var t=JSON.parse(this.responseText);0==t.length&&(r.table.headerTitle="The database row is empty");for(var i=t,n=0,o=i.length;o>n;n++)e.push(i[n].WorkersWidget);Alloy.Collections.WorkersWidgets.reset(e),Alloy.Collections.WorkersWidgets.each(function(e){e.save()});var s=Alloy.Collections.WorkersWidgets;s.fetch(),Ti.App.Properties.setString("workerswidgetsseeded","yuppers")}}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="login_form",arguments[0]?arguments[0].__parentSymbol:null,arguments[0]?arguments[0].$model:null,arguments[0]?arguments[0].__itemTemplate:null;var r=this,n={},o={};r.__views.loginForm=Ti.UI.createWindow({backgroundColor:"white",id:"loginForm",fullscreen:"false"}),r.__views.loginForm&&r.addTopLevelView(r.__views.loginForm),r.__views.loginView=Ti.UI.createView({id:"loginView",layout:"vertical"}),r.__views.loginForm.add(r.__views.loginView),r.__views.inputUsername=Ti.UI.createTextField({width:200,top:10,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,id:"inputUsername"}),r.__views.loginView.add(r.__views.inputUsername),r.__views.inputPassword=Ti.UI.createTextField({width:200,top:10,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,id:"inputPassword",passwordMask:"true"}),r.__views.loginView.add(r.__views.inputPassword),r.__views.buttonLogin=Ti.UI.createButton({top:10,id:"buttonLogin"}),r.__views.loginView.add(r.__views.buttonLogin),e?r.__views.buttonLogin.addEventListener("click",e):o["$.__views.buttonLogin!click!actionLogin"]=!0,r.__views.activityIndicator=Ti.UI.createActivityIndicator({height:Ti.UI.SIZE,width:Ti.UI.SIZE,top:20,style:Ti.UI.iPhone.ActivityIndicatorStyle.DARK,id:"activityIndicator"}),r.__views.loginView.add(r.__views.activityIndicator),n.destroy=function(){},_.extend(r,r.__views),r.loginForm.title=L("login","Login"),r.inputUsername.hintText=L("username","Username"),r.inputPassword.hintText=L("password","Password"),r.buttonLogin.title=L("login","Login");var s=Ti.UI.createButton({title:L("register","Register")});s.addEventListener("click",t),r.loginForm.rightNavButton=s,o["$.__views.buttonLogin!click!actionLogin"]&&r.__views.buttonLogin.addEventListener("click",e),_.extend(r,n)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;