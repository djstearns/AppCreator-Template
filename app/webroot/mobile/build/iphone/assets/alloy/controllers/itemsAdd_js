function Controller(){require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="itemsAdd",arguments[0]?arguments[0].__parentSymbol:null,arguments[0]?arguments[0].$model:null,arguments[0]?arguments[0].__itemTemplate:null;var e=this,t={};e.__views.fugitiveAddWindow=Ti.UI.createWindow({backgroundColor:"white",id:"fugitiveAddWindow"}),e.__views.fugitiveAddWindow&&e.addTopLevelView(e.__views.fugitiveAddWindow),e.__views.addView=Ti.UI.createScrollView({id:"addView",layout:"vertical"}),e.__views.fugitiveAddWindow.add(e.__views.addView),e.__views.name_tf=Ti.UI.createTextField({width:200,top:10,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,id:"name_tf",hintText:"Name"}),e.__views.addView.add(e.__views.name_tf),e.__views.description=Ti.UI.createTextField({width:200,top:10,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,id:"description",hintText:"Description"}),e.__views.addView.add(e.__views.description),e.__views.yingredient_id=Ti.UI.createTextField({width:200,top:10,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,id:"yingredient_id"}),e.__views.addView.add(e.__views.yingredient_id),e.__views.yingredientname=Ti.UI.createTextField({width:200,top:10,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,id:"yingredientname"}),e.__views.addView.add(e.__views.yingredientname),e.__views.pickingredient=Ti.UI.createButton({top:10,title:"Ingredient",id:"pickingredient"}),e.__views.addView.add(e.__views.pickingredient),e.__views.upc=Ti.UI.createTextField({width:200,top:10,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,id:"upc",hintText:"UPC"}),e.__views.addView.add(e.__views.upc),e.__views.scanner=Ti.UI.createButton({top:10,id:"scanner",systemButton:Ti.UI.iPhone.SystemButton.CAMERA}),e.__views.addView.add(e.__views.scanner),e.__views.size=Ti.UI.createTextField({width:200,top:10,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,id:"size",hintText:"size"}),e.__views.addView.add(e.__views.size),e.__views.measurement=Ti.UI.createTextField({width:200,top:10,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,id:"measurement",hintText:"measurement"}),e.__views.addView.add(e.__views.measurement),e.__views.save_button=Ti.UI.createButton({top:10,id:"save_button",title:"Save"}),e.__views.addView.add(e.__views.save_button),e.__views.cancel=Ti.UI.createButton({top:10,id:"cancel",title:"Cancel"}),e.__views.addView.add(e.__views.cancel),t.destroy=function(){},_.extend(e,e.__views),arguments[0]||{},e.save_button.addEventListener("click",function(){var t=Ti.Network.createHTTPClient({onerror:function(e){Ti.API.debug(e.error),alert(e.error)},timeout:1e3});t.onload=function(){var t=JSON.parse(this.responseText);if(Ti.API.info(t),"Saved!"==t.message){var i=Alloy.createModel("Item",{id:t.id,name:e.name_tf.value,description:e.description.value,yingredient_id:e.yingredient_id.value,upc:e.upc.value,size:e.size.value,measurement:e.measurement.value,user_id:1,updated:"12-31-2013",created:"12-31-2013"});i.save(),Alloy.Collections.Item.fetch()}},t.open("POST","http://www.derekstearns.com/dinnernew/items/appadd"),t.setRequestHeader("Content-Type","application/json"),t.send({name:e.name_tf.value,descr:e.description.value,yingredient_id:e.yingredient_id.value,upc:e.upc.value,size:e.size.value,measurement:e.measurement.value,user_id:1}),e.fugitiveAddWindow.close()}),e.scanner.addEventListener("click",function(){var e=Alloy.createController("scanner",{upload:"false",functionname:"fillupc"});e.getView().open()}),Ti.App.addEventListener("fillupc",function(t){e.upc.value=t.barcode}),Ti.App.addEventListener("changefield",function(t){e.yingredient_id.value=t.value,e.yingredientname.value=t.title}),e.pickingredient.addEventListener("click",function(){var e=Alloy.createController("yingredientschooser").getView();e.open()}),e.cancel.addEventListener("click",function(){e.fugitiveAddWindow.close()}),_.extend(e,t)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;